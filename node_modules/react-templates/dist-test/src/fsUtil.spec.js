'use strict';

var fs = require('fs');
var fsUtil = require('../../src/fsUtil');
var path = require('path');

module.exports = {
    runTests: function runTests(test, dataPath) {
        test('test isStale', function (t) {
            var a = path.join(dataPath, 'a.tmp');
            var b = path.join(dataPath, 'b.tmp');

            fs.writeFileSync(a, 'actual');
            fs.writeFileSync(b, 'actual');

            var mtime1 = new Date(1995, 11, 17, 3, 24, 0);
            fs.utimesSync(a, mtime1, mtime1);

            var mtime2 = new Date(1995, 11, 17, 3, 24, 1);
            fs.utimesSync(b, mtime2, mtime2);

            var actual = fsUtil.isStale(a, b);
            t.equal(actual, false);
            actual = fsUtil.isStale(b, a);
            t.equal(actual, true);

            fs.unlinkSync(a);
            fs.unlinkSync(b);
            t.end();
        });
    }
};